import{u as y,s as g,k as T,l as k,h as H,g as w,m as n,T as x,o as a,c as o,b as e,F as p,n as $,t as u,i as f,j as A}from"./index-d0d8b659.js";const B=e("h2",{class:"fw-bold ms-2"}," 出勤異常 ",-1),I=e("h5",{class:"p-2"},"將顯示近兩個月的打卡異常",-1),L={class:"table table-hover table-primary m-2 text-center shadow"},U=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"狀態"),e("th",{scope:"col"},"日期"),e("th",{scope:"col"},"上班時間"),e("th",{scope:"col"},"下班時間")])],-1),D=e("th",{scope:"row"},"異常",-1),F={key:1,colspan:"4",class:"text-center fs-5 p-2"},N={__name:"absenceList",setup(b){const m=y(),{currentUser:h}=g(m),r=T([]);return k(async()=>{var l,d;try{const s=h.value.id;let c=await H.getUserAbsence({userId:s});if(c=c.data.absenceData,!c.length){r.value=!1;return}const v=w(()=>c.map(_=>{let{startTime:i,endTime:t}=_.Attendances;return i=n(i).format("HH:mm")||"未打卡",t=t?n(t).isAfter(_.date,"day")?n(t).format("HH:mm")+" (+1)":n(t).format("HH:mm"):"未打卡",{..._,startTime:i,endTime:t}}));r.value=v.value}catch(s){x.error(((d=(l=s.response)==null?void 0:l.data)==null?void 0:d.message)||s.message)}}),(l,d)=>(a(),o(p,null,[B,I,e("table",L,[U,e("tbody",null,[r.value?(a(!0),o(p,{key:0},$(r.value,s=>(a(),o("tr",{key:s.id,class:"table-light"},[D,e("td",null,u(s.date),1),e("td",null,u(s.startTime),1),e("td",null,u(s.endTime),1)]))),128)):(a(),o("td",F," 目前沒有異常資料 "))])])],64))}},P={class:"container py-5"},S={class:"row"},V={class:"col-md-5"},j={class:"col-md-6"},M={__name:"absence",setup(b){return(m,h)=>(a(),o("div",P,[e("div",S,[e("div",V,[f(A)]),e("div",j,[f(N)])])]))}};export{M as default};
