import{u as y,s as g,k as T,l as k,h as H,g as w,m as l,T as x,o as a,c as o,b as e,F as p,n as $,t as u,i as f,j as A}from"./index-5799d7e7.js";const B=e("h2",{class:"fw-bold ms-2"}," 出勤異常 ",-1),I=e("h5",{class:"p-2"},"將顯示近兩個月的打卡異常 ( 不算休假日 )",-1),L={class:"table table-hover table-primary m-2 text-center shadow"},U=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"狀態"),e("th",{scope:"col"},"日期"),e("th",{scope:"col"},"上班時間"),e("th",{scope:"col"},"下班時間")])],-1),D=e("th",{scope:"row"},"異常",-1),F={key:1,colspan:"4",class:"text-center fs-5 p-2"},N={__name:"absenceList",setup(b){const m=y(),{currentUser:h}=g(m),r=T([]);return k(async()=>{var d,_;try{const s=h.value.id;let c=await H.getUserAbsence({userId:s});if(c=c.data.absenceData,!c.length){r.value=!1;return}const v=w(()=>c.map(i=>{let{startTime:n,endTime:t}=i.Attendances;return n=n?l(n).format("HH:mm"):"未打卡",t=t?l(t).isAfter(i.date,"day")?l(t).format("HH:mm")+" (+1)":l(t).format("HH:mm"):"未打卡",{...i,startTime:n,endTime:t}}));r.value=v.value}catch(s){x.error(((_=(d=s.response)==null?void 0:d.data)==null?void 0:_.message)||s.message)}}),(d,_)=>(a(),o(p,null,[B,I,e("table",L,[U,e("tbody",null,[r.value?(a(!0),o(p,{key:0},$(r.value,s=>(a(),o("tr",{key:s.id,class:"table-light"},[D,e("td",null,u(s.date),1),e("td",null,u(s.startTime),1),e("td",null,u(s.endTime),1)]))),128)):(a(),o("td",F," 目前沒有異常資料 "))])])],64))}},P={class:"container py-5"},S={class:"row"},V={class:"col-md-5"},j={class:"col-md-6"},M={__name:"absence",setup(b){return(m,h)=>(a(),o("div",P,[e("div",S,[e("div",V,[f(A)]),e("div",j,[f(N)])])]))}};export{M as default};
