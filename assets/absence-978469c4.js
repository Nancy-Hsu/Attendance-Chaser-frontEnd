import{k,l as U,m as A,n as B,h as I,g as j,T as P,o as S,c as M,d as u,F as Z,p as V,t as w,i as L,j as E}from"./index-325963ef.js";var N={exports:{}};(function(z,D){(function(m,d){z.exports=d()})(k,function(){var m="minute",d=/[+-]\d\d(?::?\d\d)?/g,v=/([+-]|\d\d)/g;return function(H,a,$){var e=a.prototype;$.utc=function(t){var s={date:t,utc:!0,args:arguments};return new a(s)},e.utc=function(t){var s=$(this.toDate(),{locale:this.$L,utc:!0});return t?s.add(this.utcOffset(),m):s},e.local=function(){return $(this.toDate(),{locale:this.$L,utc:!1})};var _=e.parse;e.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),_.call(this,t)};var h=e.init;e.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else h.call(this)};var Y=e.utcOffset;e.utcOffset=function(t,s){var f=this.$utils().u;if(f(t))return this.$u?0:f(this.$offset)?Y.call(this):this.$offset;if(typeof t=="string"&&(t=function(l){l===void 0&&(l="");var y=l.match(d);if(!y)return null;var g=(""+y[0]).match(v)||["-",0,0],T=g[0],x=60*+g[1]+ +g[2];return x===0?0:T==="+"?x:-x}(t),t===null))return this;var r=Math.abs(t)<=16?60*t:t,i=this;if(s)return i.$offset=r,i.$u=t===0,i;if(t!==0){var p=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(i=this.local().add(r+p,m)).$offset=r,i.$x.$localOffset=p}else i=this.utc();return i};var n=e.format;e.format=function(t){var s=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return n.call(this,s)},e.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},e.isUTC=function(){return!!this.$u},e.toISOString=function(){return this.toDate().toISOString()},e.toString=function(){return this.toDate().toUTCString()};var c=e.toDate;e.toDate=function(t){return t==="s"&&this.$offset?$(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():c.call(this)};var o=e.diff;e.diff=function(t,s,f){if(t&&this.$u===t.$u)return o.call(this,t,s,f);var r=this.local(),i=$(t).local();return o.call(r,i,s,f)}}})})(N);const G=N.exports;var F={exports:{}};(function(z,D){(function(m,d){z.exports=d()})(k,function(){var m={year:0,month:1,day:2,hour:3,minute:4,second:5},d={};return function(v,H,a){var $,e=function(n,c,o){o===void 0&&(o={});var t=new Date(n),s=function(f,r){r===void 0&&(r={});var i=r.timeZoneName||"short",p=f+"|"+i,l=d[p];return l||(l=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:f,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),d[p]=l),l}(c,o);return s.formatToParts(t)},_=function(n,c){for(var o=e(n,c),t=[],s=0;s<o.length;s+=1){var f=o[s],r=f.type,i=f.value,p=m[r];p>=0&&(t[p]=parseInt(i,10))}var l=t[3],y=l===24?0:l,g=t[0]+"-"+t[1]+"-"+t[2]+" "+y+":"+t[4]+":"+t[5]+":000",T=+n;return(a.utc(g).valueOf()-(T-=T%1e3))/6e4},h=H.prototype;h.tz=function(n,c){n===void 0&&(n=$);var o=this.utcOffset(),t=this.toDate(),s=t.toLocaleString("en-US",{timeZone:n}),f=Math.round((t-new Date(s))/1e3/60),r=a(s).$set("millisecond",this.$ms).utcOffset(15*-Math.round(t.getTimezoneOffset()/15)-f,!0);if(c){var i=r.utcOffset();r=r.add(o-i,"minute")}return r.$x.$timezone=n,r},h.offsetName=function(n){var c=this.$x.$timezone||a.tz.guess(),o=e(this.valueOf(),c,{timeZoneName:n}).find(function(t){return t.type.toLowerCase()==="timezonename"});return o&&o.value};var Y=h.startOf;h.startOf=function(n,c){if(!this.$x||!this.$x.$timezone)return Y.call(this,n,c);var o=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return Y.call(o,n,c).tz(this.$x.$timezone,!0)},a.tz=function(n,c,o){var t=o&&c,s=o||c||$,f=_(+a(),s);if(typeof n!="string")return a(n).tz(s);var r=function(y,g,T){var x=y-60*g*1e3,O=_(x,T);if(g===O)return[x,g];var C=_(x-=60*(O-g)*1e3,T);return O===C?[x,O]:[y-60*Math.min(O,C)*1e3,Math.max(O,C)]}(a.utc(n,t).valueOf(),f,s),i=r[0],p=r[1],l=a(i).utcOffset(p);return l.$x.$timezone=s,l},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(n){$=n}}})})(F);const W=F.exports;U.extend(G);U.extend(W);const q=U.tz.guess();U.tz.setDefault(q);const b=U,J=u("h2",{class:"fw-bold ms-2"}," 出勤異常 ",-1),K=u("small",{class:"p-3"},"將顯示近兩個月的打卡異常",-1),Q={class:"table table-hover table-primary m-2 text-center"},R=u("thead",null,[u("tr",null,[u("th",{scope:"col"},"狀態"),u("th",{scope:"col"},"日期"),u("th",{scope:"col"},"上班時間"),u("th",{scope:"col"},"下班時間")])],-1),X=u("th",{scope:"row"},"異常",-1),tt={key:1,colspan:"4",class:"text-center"},et={__name:"absenceList",setup(z){const D=A([]);return B(async()=>{var m,d;try{const H=(await I.getCurrentUser()).data.currentUser.id;let a=await I.getUserAbsence({userId:H});if(a=a.data.absenceData,!a.length){D.value=!1;return}const $=j(()=>a.map(e=>{let{startTime:_,endTime:h}=e.Attendances;return _=b(_).format("HH:mm")||"未打卡",h=h?b(h).isAfter(e.date,"day")?b(h).format("HH:mm")+" (+1)":b(h).format("HH:mm"):"未打卡",{...e,startTime:_,endTime:h}}));D.value=$.value,console.log(D.value)}catch(v){P.error(((d=(m=v.response)==null?void 0:m.data)==null?void 0:d.message)||v.message)}}),(m,d)=>(S(),M(Z,null,[J,K,u("table",Q,[R,u("tbody",null,[D.value?(S(!0),M(Z,{key:0},V(D.value,v=>(S(),M("tr",{key:v.id,class:"table-light"},[X,u("td",null,w(v.date),1),u("td",null,w(v.startTime),1),u("td",null,w(v.endTime),1)]))),128)):(S(),M("td",tt," 目前沒有異常資料 "))])])],64))}},st={class:"container py-5"},nt=u("h1",{class:"mt-1"}," 首頁 - 個人資料 ",-1),rt={class:"row"},at={class:"col-md-5"},ot={class:"col-md-6"},ut={__name:"absence",setup(z){return(D,m)=>(S(),M("div",st,[nt,u("div",rt,[u("div",at,[L(E)]),u("div",ot,[L(et)])])]))}};export{ut as default};
