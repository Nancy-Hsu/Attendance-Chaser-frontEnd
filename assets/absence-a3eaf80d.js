import{k as y,l as g,h as m,g as k,m as l,T as H,o,c as r,b as e,F as h,n as T,t as u,i as p,j as $}from"./index-471b8264.js";const w=e("h2",{class:"fw-bold ms-2"}," 出勤異常 ",-1),x=e("small",{class:"p-3"},"將顯示近兩個月的打卡異常",-1),A={class:"table table-hover table-primary m-2 text-center"},B=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"狀態"),e("th",{scope:"col"},"日期"),e("th",{scope:"col"},"上班時間"),e("th",{scope:"col"},"下班時間")])],-1),U=e("th",{scope:"row"},"異常",-1),I={key:1,colspan:"4",class:"text-center"},L={__name:"absenceList",setup(f){const t=y([]);return g(async()=>{var c,d;try{const b=(await m.getCurrentUser()).data.currentUser.id;let n=await m.getUserAbsence({userId:b});if(n=n.data.absenceData,!n.length){t.value=!1;return}const v=k(()=>n.map(_=>{let{startTime:i,endTime:a}=_.Attendances;return i=l(i).format("HH:mm")||"未打卡",a=a?l(a).isAfter(_.date,"day")?l(a).format("HH:mm")+" (+1)":l(a).format("HH:mm"):"未打卡",{..._,startTime:i,endTime:a}}));t.value=v.value,console.log(t.value)}catch(s){H.error(((d=(c=s.response)==null?void 0:c.data)==null?void 0:d.message)||s.message)}}),(c,d)=>(o(),r(h,null,[w,x,e("table",A,[B,e("tbody",null,[t.value?(o(!0),r(h,{key:0},T(t.value,s=>(o(),r("tr",{key:s.id,class:"table-light"},[U,e("td",null,u(s.date),1),e("td",null,u(s.startTime),1),e("td",null,u(s.endTime),1)]))),128)):(o(),r("td",I," 目前沒有異常資料 "))])])],64))}},D={class:"container py-5"},F=e("h1",{class:"mt-1"}," 首頁 - 個人資料 ",-1),N={class:"row"},P={class:"col-md-5"},V={class:"col-md-6"},C={__name:"absence",setup(f){return(t,c)=>(o(),r("div",D,[F,e("div",N,[e("div",P,[p($)]),e("div",V,[p(L)])])]))}};export{C as default};
