import{a as w,u as _,b as f,r as g,o as b,c as h,d as s,e as v,w as x,f as i,v as d,T as c}from"./index-53a7ae32.js";const y={login({account:l,password:n}){return w.post("/users/login",{account:l,password:n})}},k="/Attendance-Chaser-frontEnd/assets/logo-c398c491.png",S={class:"container py-5"},A={class:"row"},U={class:"col-md-6 text-center p-3"},B=["src"],C={class:"col-md-6"},E=s("h1",{class:"px-4 py-2 w-75 text-end"},"Login",-1),I={class:"form-group row mb-3 w-75 text-start"},P=s("label",{for:"account",class:"col-sm-3 col-form-label fs-4"},"Account",-1),T={class:"col-sm-9"},V=s("small",{class:"form-text text-muted"},"預設為你的工號",-1),q={class:"form-group row mb-3 fs-4 w-75 text-start"},L=s("label",{for:"password",class:"col-sm-3 col-form-label"},"Password",-1),M={class:"col-sm-9"},z={class:"px-4 w-75 text-end"},N={__name:"logIn",setup(l){const n=_(),u=f(),e=g({account:"",password:""});async function p(){var a,o;try{if(!e.account||!e.password){c.warning("請填入 email 和 password");return}const t=await y.login({account:e.account,password:e.password}),r=t==null?void 0:t.data;if(r.status==="warning"){c.warning(r.msg);return}if((r==null?void 0:r.status)==="error"){c.error(r.message);return}localStorage.setItem("token",r.token);const{user:m}=r;n.setCurrentUser(m),console.log(n.currentUser.isAuthenticated),u.push({path:"/main"})}catch(t){e.password="",c.error(((o=(a=t.response)==null?void 0:a.data)==null?void 0:o.message)||t.message)}}return(a,o)=>(b(),h("div",S,[s("div",A,[s("div",U,[s("img",{src:v(k),alt:""},null,8,B)]),s("div",C,[s("div",null,[E,s("form",{onSubmit:o[3]||(o[3]=x((...t)=>a.onSubmit&&a.onSubmit(...t),["prevent"]))},[s("fieldset",null,[s("div",I,[P,s("div",T,[i(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.account=t),type:"text",class:"form-control",id:"account","aria-describedby":"insertAccount",placeholder:"Enter account",autocomplete:"username",required:"",autofocus:""},null,512),[[d,e.account]]),V])]),s("div",q,[L,s("div",M,[i(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),type:"password",class:"form-control",id:"password",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[d,e.password]])])]),s("div",z,[s("button",{type:"submit",class:"btn btn-primary btn-block mb-3",onClick:o[2]||(o[2]=t=>p())},"Submit")])])],32)])])])]))}};export{N as default};
