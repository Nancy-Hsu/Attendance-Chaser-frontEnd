import{a as w,u as f,r as _,c as b,b as s,d as g,w as h,e as i,v as d,T as n,o as v,f as x}from"./index-867237de.js";const y={login({account:l,password:c}){return w.post("/api/users/login/",{account:l,password:c})}},k="/Attendance-Chaser-frontEnd/assets/logo-c398c491.png",S={class:"container py-5"},A={class:"row"},B={class:"col-md-6 text-center p-3"},C=["src"],E={class:"col-md-6"},I=s("h1",{class:"px-4 py-2 w-75 text-end"},"Login",-1),P={class:"form-group row mb-2 w-75 text-start"},T=s("label",{for:"account",class:"col-sm-3 col-form-label fs-4"},"Account",-1),U={class:"col-sm-9"},V=s("p",{class:"form-text text-muted fs-5"},"預設為你的工號",-1),q={class:"form-group row mb-2 fs-4 w-75 text-start"},D=s("label",{for:"password",class:"col-sm-3 col-form-label"},"Password",-1),L={class:"col-sm-9"},M={class:"px-4 w-75 text-end"},z={__name:"logIn",setup(l){const c=f(),u=x(),e=_({account:"",password:""});async function p(){var a,o;try{if(!e.account||!e.password){n.warning("請填入 account 和 password");return}const t=await y.login({account:e.account,password:e.password}),r=t==null?void 0:t.data;if(r.status==="warning"){n.warning(`${r.msg}`);return}localStorage.setItem("token",r.token);const{user:m}=r;c.setCurrentUser(m),u.push({path:"/main"}),n.success("成功登入")}catch(t){e.password="",n.error(((o=(a=t.response)==null?void 0:a.data)==null?void 0:o.message)||t.message)}}return(a,o)=>(v(),b("div",S,[s("div",A,[s("div",B,[s("img",{src:g(k),alt:""},null,8,C)]),s("div",E,[s("div",null,[I,s("form",{onSubmit:o[3]||(o[3]=h((...t)=>a.onSubmit&&a.onSubmit(...t),["prevent"]))},[s("fieldset",null,[s("div",P,[T,s("div",U,[i(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.account=t),type:"text",class:"form-control fs-4",id:"account","aria-describedby":"insertAccount",placeholder:"Enter account",autocomplete:"username",required:"",autofocus:""},null,512),[[d,e.account]]),V])]),s("div",q,[D,s("div",L,[i(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),type:"password",class:"form-control fs-4",id:"password",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[d,e.password]])])]),s("div",M,[s("button",{type:"submit",class:"btn btn-primary btn-block my-3 fs-5 w-25",onClick:o[2]||(o[2]=t=>p())},"Submit")])])],32)])])])]))}};export{z as default};
