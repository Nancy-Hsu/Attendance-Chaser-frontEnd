import{a as w,u as _,b as f,r as g,o as b,c as h,d as s,e as v,w as x,f as i,v as d,T as c}from"./index-5a9390b7.js";const y={login({account:l,password:n}){return w.post("/users/login",{account:l,password:n})}},k="/assets/logo-c398c491.png",S={class:"container py-5"},A={class:"row"},U={class:"col-md-6 text-center p-3"},B=["src"],I={class:"col-md-6"},P=s("h1",{class:"px-4 py-2 w-75 text-end"},"Login",-1),T={class:"form-group row mb-3 w-75 text-start"},V=s("label",{for:"account",class:"col-sm-3 col-form-label fs-4"},"Account",-1),q={class:"col-sm-9"},C=s("small",{class:"form-text text-muted"},"預設為你的工號",-1),E={class:"form-group row mb-3 fs-4 w-75 text-start"},L=s("label",{for:"password",class:"col-sm-3 col-form-label"},"Password",-1),M={class:"col-sm-9"},z={class:"px-4 w-75 text-end"},N={__name:"logIn",setup(l){const n=_(),u=f(),e=g({account:"",password:""});async function p(){var a,t;try{if(!e.account||!e.password){c.warning("請填入 email 和 password");return}const o=await y.login({account:e.account,password:e.password}),r=o==null?void 0:o.data;if(r.status==="warning"){c.warning(r.msg);return}if((r==null?void 0:r.status)==="error"){c.error(r.message);return}localStorage.setItem("token",r.token);const{user:m}=r;n.setCurrentUser(m),console.log(n.currentUser.isAuthenticated),u.push({path:"/main"})}catch(o){e.password="",c.error(((t=(a=o.response)==null?void 0:a.data)==null?void 0:t.message)||o.message)}}return(a,t)=>(b(),h("div",S,[s("div",A,[s("div",U,[s("img",{src:v(k),alt:""},null,8,B)]),s("div",I,[s("div",null,[P,s("form",{onSubmit:t[3]||(t[3]=x((...o)=>a.onSubmit&&a.onSubmit(...o),["prevent"]))},[s("fieldset",null,[s("div",T,[V,s("div",q,[i(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.account=o),type:"text",class:"form-control",id:"account","aria-describedby":"insertAccount",placeholder:"Enter account",autocomplete:"username",required:"",autofocus:""},null,512),[[d,e.account]]),C])]),s("div",E,[L,s("div",M,[i(s("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.password=o),type:"password",class:"form-control",id:"password",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[d,e.password]])])]),s("div",z,[s("button",{type:"submit",class:"btn btn-primary btn-block mb-3",onClick:t[2]||(t[2]=o=>p())},"Submit")])])],32)])])])]))}};export{N as default};
